{% extends 'layout.html' %}

{% load staticfiles %}

{% block breadcrumb %}
    <li><strong>Students</strong></li>
    <li>{{ request.user.profile.school }}</li>
{% endblock %}

{% block content %}
    <!-- widget div-->
    <div>

        <!-- widget edit box -->
        <div class="jarviswidget-editbox">
            <!-- This area used as dropdown edit box -->

        </div>
        <!-- end widget edit box -->

        <!-- widget content -->
        <div class="well">

            <div class="widget-body-toolbar">

                <div class="row">

                    <div class="col-xs-9 col-sm-5 col-md-5 col-lg-5">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="fa fa-search"></i></span>
                            <input class="form-control" id="prepend" placeholder="Filter by name, admission number, class, code" type="text">
                        </div>
                    </div>

                </div>


            </div>


            <table id="datatable_fixed_column" class="table table-striped table-bordered" width="100%">

                <thead>
                <tr>
                    <th class="col-xs-3 text-uppercase">NAME</th>
                    <th class="col-xs-3 text-uppercase">Admission Number</th>
                    <th class="col-xs-1 text-uppercase">Code</th>
                    <th class="col-xs-1 text-uppercase">Class</th>
                    <th class="col-xs-4 text-uppercase">Next of Kin</th>
                </tr>
                </thead>

                <tbody>

                {% if students %}
                    {% for student in students %}
                        <tr>
                            <td>
                                <a href="{% url 'student_details' student.id %}">{{ student.first_name }} {{ student.last_name }}</a>
                            </td>
                            <td>{{ student.admission_number }}</td>
                            <td>{{ student.code }}</td>
                            <td>{{ student.school_class }} {{ student.stream }}</td>
                            <td>
                                {% for nok in student.studentnok_set.all %}
                                    <a href="{% url 'user_profile' nok.profile.id %}">
                                        {{ nok.profile.user.first_name }} {{ nok.profile.user.last_name }}
                                    </a>
                                {% endfor %}
                            </td>
                        </tr>
                    {% endfor %}
                {% endif %}

                </tbody>

            </table>

        </div>
        <!-- end widget content -->

    </div>
    <!-- end widget div -->
{% endblock %}

{% block scripts %}

    <!-- PAGE RELATED PLUGIN(S) -->
    <script src="{% static 'js/plugin/datatables/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'js/plugin/datatables/dataTables.colVis.min.js' %}"></script>
    <script src="{% static 'js/plugin/datatables/dataTables.tableTools.min.js' %}"></script>
    <script src="{% static 'js/plugin/datatables/dataTables.bootstrap.min.js' %}"></script>
    <script src="{% static 'js/plugin/datatable-responsive/datatables.responsive.min.js' %}"></script>

{% endblock %}